name: Add first comment to a new PR
on:
  pull_request:
    types:
      - opened
jobs:
  labeler:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Parse OWNERS
        id: owners
        uses: upalatucci/get-owners-action@v1

      - name: Add welcome comment - none owner
        if: |
          !(
            contains(steps.owners.outputs.approvers, github.event.comment.user.login || 'null') ||
            contains(steps.owners.outputs.reviewers, github.event.comment.user.login || 'null')
          )
        uses: mshick/add-pr-comment@v1
        env:
          GITHUB_TOKEN: ${{ secrets.KUBE_BOT_PAT }}
        with:
          message: |
            Hi, welcome to kubevirt ui, thank you this pull request ðŸ’–âœ¨

      - name: Add welcome comment - owner
        if: |
          contains(steps.owners.outputs.approvers, github.event.comment.user.login || 'null') ||
          contains(steps.owners.outputs.reviewers, github.event.comment.user.login || 'null')
        uses: mshick/add-pr-comment@v1
        env:
          GITHUB_TOKEN: ${{ secrets.KUBE_BOT_PAT }}
        with:
          message: |
            ${{ github.event.comment.user.login }} hi, great to see you.
